generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Modalidad {
  id                  Int              @id @default(autoincrement())
  nombre              String?
  presentacion        String?
  apertura            String?
  adjudicacion        String?
  presentacion_docs   String?
  firma               String?
  usuarioModificacion String?
  eliminado           Boolean          @default(false)
  contrataciones      Contratacion[]
  modalidadEtapas     ModalidadEtapa[]
}

model Etapas {
  id                  Int     @id @default(autoincrement())
  nombre              String?
  usuarioModificacion String?

  eliminado       Boolean          @default(false)
  modalidadEtapas ModalidadEtapa[]
}

model ModalidadEtapa {
  id         Int     @id @default(autoincrement())
  etapaId    Int
  cantidad   String? @default("0")
  habilitado Boolean @default(true)
  eliminado  Boolean @default(false)

  usuarioModificacion String?

  modalidadId Int
  modalidad   Modalidad @relation(fields: [modalidadId], references: [id])
  etapa       Etapas    @relation(fields: [etapaId], references: [id])
}

model Contratacion {
  id              Int       @id @default(autoincrement())
  titulo          String?
  monto           Float?    @default(0)
  fechaGeneracion DateTime?
  fechaInicio     DateTime

  etapas          Json?
  usuarioCreacion String?
  eliminado       Boolean @default(false)

  modalidadId Int
  modalidad   Modalidad @relation(fields: [modalidadId], references: [id])
}

model Feriado {
  id                  Int      @id @default(autoincrement())
  fecha               DateTime @unique
  nombre              String
  eliminado           Boolean  @default(false)
  usuarioModificacion String?
}
